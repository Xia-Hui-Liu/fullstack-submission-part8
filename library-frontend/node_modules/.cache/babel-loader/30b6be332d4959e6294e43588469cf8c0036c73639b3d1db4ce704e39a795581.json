{"ast":null,"code":"import { invariant, newInvariantError } from '../globals/index.js';\nimport { valueToObjectRepresentation } from './storeUtils.js';\nexport function checkDocument(doc) {\n  invariant(doc && doc.kind === 'Document', 71);\n  var operations = doc.definitions.filter(function (d) {\n    return d.kind !== 'FragmentDefinition';\n  }).map(function (definition) {\n    if (definition.kind !== 'OperationDefinition') {\n      throw newInvariantError(72, definition.kind);\n    }\n    return definition;\n  });\n  invariant(operations.length <= 1, 73, operations.length);\n  return doc;\n}\nexport function getOperationDefinition(doc) {\n  checkDocument(doc);\n  return doc.definitions.filter(function (definition) {\n    return definition.kind === 'OperationDefinition';\n  })[0];\n}\nexport function getOperationName(doc) {\n  return doc.definitions.filter(function (definition) {\n    return definition.kind === 'OperationDefinition' && !!definition.name;\n  }).map(function (x) {\n    return x.name.value;\n  })[0] || null;\n}\nexport function getFragmentDefinitions(doc) {\n  return doc.definitions.filter(function (definition) {\n    return definition.kind === 'FragmentDefinition';\n  });\n}\nexport function getQueryDefinition(doc) {\n  var queryDef = getOperationDefinition(doc);\n  invariant(queryDef && queryDef.operation === 'query', 74);\n  return queryDef;\n}\nexport function getFragmentDefinition(doc) {\n  invariant(doc.kind === 'Document', 75);\n  invariant(doc.definitions.length <= 1, 76);\n  var fragmentDef = doc.definitions[0];\n  invariant(fragmentDef.kind === 'FragmentDefinition', 77);\n  return fragmentDef;\n}\nexport function getMainDefinition(queryDoc) {\n  checkDocument(queryDoc);\n  var fragmentDefinition;\n  for (var _i = 0, _a = queryDoc.definitions; _i < _a.length; _i++) {\n    var definition = _a[_i];\n    if (definition.kind === 'OperationDefinition') {\n      var operation = definition.operation;\n      if (operation === 'query' || operation === 'mutation' || operation === 'subscription') {\n        return definition;\n      }\n    }\n    if (definition.kind === 'FragmentDefinition' && !fragmentDefinition) {\n      fragmentDefinition = definition;\n    }\n  }\n  if (fragmentDefinition) {\n    return fragmentDefinition;\n  }\n  throw newInvariantError(78);\n}\nexport function getDefaultValues(definition) {\n  var defaultValues = Object.create(null);\n  var defs = definition && definition.variableDefinitions;\n  if (defs && defs.length) {\n    defs.forEach(function (def) {\n      if (def.defaultValue) {\n        valueToObjectRepresentation(defaultValues, def.variable.name, def.defaultValue);\n      }\n    });\n  }\n  return defaultValues;\n}","map":{"version":3,"mappings":"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","names":["invariant","newInvariantError","valueToObjectRepresentation","checkDocument","doc","kind","operations","definitions","filter","map","definition","length","getOperationDefinition","getOperationName","name","x","value","getFragmentDefinitions","getQueryDefinition","queryDef","operation","getFragmentDefinition","fragmentDef","getMainDefinition","queryDoc","fragmentDefinition","_a","_i","getDefaultValues","defaultValues","Object","create","defs","variableDefinitions","forEach","def","defaultValue","variable"],"sources":["/Users/xiahuiliu/Documents/fullstack-submission-8/library-frontend/node_modules/@apollo/src/utilities/graphql/getFromAST.ts"],"sourcesContent":["import { invariant, newInvariantError } from '../globals/index.js';\n\nimport type {\n  DocumentNode,\n  OperationDefinitionNode,\n  FragmentDefinitionNode,\n  ValueNode,\n} from 'graphql';\n\nimport { valueToObjectRepresentation } from './storeUtils.js';\n\ntype OperationDefinitionWithName = OperationDefinitionNode & {\n  name: NonNullable<OperationDefinitionNode['name']>;\n};\n\n// Checks the document for errors and throws an exception if there is an error.\nexport function checkDocument(doc: DocumentNode) {\n  invariant(\n    doc && doc.kind === 'Document',\n    `Expecting a parsed GraphQL document. Perhaps you need to wrap the query \\\nstring in a \"gql\" tag? http://docs.apollostack.com/apollo-client/core.html#gql`,\n  );\n\n  const operations = doc.definitions\n    .filter(d => d.kind !== 'FragmentDefinition')\n    .map(definition => {\n      if (definition.kind !== 'OperationDefinition') {\n        throw newInvariantError(\n          `Schema type definitions not allowed in queries. Found: \"%s\"`,\n          definition.kind\n        );\n      }\n      return definition;\n    });\n\n  invariant(\n    operations.length <= 1,\n    `Ambiguous GraphQL document: contains %s operations`,\n    operations.length\n  );\n\n  return doc;\n}\n\nexport function getOperationDefinition(\n  doc: DocumentNode,\n): OperationDefinitionNode | undefined {\n  checkDocument(doc);\n  return doc.definitions.filter(\n    (definition): definition is OperationDefinitionNode =>\n      definition.kind === 'OperationDefinition',\n  )[0];\n}\n\nexport function getOperationName(doc: DocumentNode): string | null {\n  return (\n    doc.definitions\n      .filter(\n        (definition): definition is OperationDefinitionWithName =>\n          definition.kind === 'OperationDefinition' && !!definition.name,\n      )\n      .map((x) => x.name.value)[0] || null\n  );\n}\n\n// Returns the FragmentDefinitions from a particular document as an array\nexport function getFragmentDefinitions(\n  doc: DocumentNode,\n): FragmentDefinitionNode[] {\n  return doc.definitions.filter(\n    (definition): definition is FragmentDefinitionNode =>\n      definition.kind === 'FragmentDefinition',\n  );\n}\n\nexport function getQueryDefinition(doc: DocumentNode): OperationDefinitionNode {\n  const queryDef = getOperationDefinition(doc)!;\n\n  invariant(\n    queryDef && queryDef.operation === 'query',\n    'Must contain a query definition.',\n  );\n\n  return queryDef;\n}\n\nexport function getFragmentDefinition(\n  doc: DocumentNode,\n): FragmentDefinitionNode {\n  invariant(\n    doc.kind === 'Document',\n    `Expecting a parsed GraphQL document. Perhaps you need to wrap the query \\\nstring in a \"gql\" tag? http://docs.apollostack.com/apollo-client/core.html#gql`,\n  );\n\n  invariant(\n    doc.definitions.length <= 1,\n    'Fragment must have exactly one definition.',\n  );\n\n  const fragmentDef = doc.definitions[0] as FragmentDefinitionNode;\n\n  invariant(\n    fragmentDef.kind === 'FragmentDefinition',\n    'Must be a fragment definition.',\n  );\n\n  return fragmentDef as FragmentDefinitionNode;\n}\n\n/**\n * Returns the first operation definition found in this document.\n * If no operation definition is found, the first fragment definition will be returned.\n * If no definitions are found, an error will be thrown.\n */\nexport function getMainDefinition(\n  queryDoc: DocumentNode,\n): OperationDefinitionNode | FragmentDefinitionNode {\n  checkDocument(queryDoc);\n\n  let fragmentDefinition;\n\n  for (let definition of queryDoc.definitions) {\n    if (definition.kind === 'OperationDefinition') {\n      const operation = (definition as OperationDefinitionNode).operation;\n      if (\n        operation === 'query' ||\n        operation === 'mutation' ||\n        operation === 'subscription'\n      ) {\n        return definition as OperationDefinitionNode;\n      }\n    }\n    if (definition.kind === 'FragmentDefinition' && !fragmentDefinition) {\n      // we do this because we want to allow multiple fragment definitions\n      // to precede an operation definition.\n      fragmentDefinition = definition as FragmentDefinitionNode;\n    }\n  }\n\n  if (fragmentDefinition) {\n    return fragmentDefinition;\n  }\n\n  throw newInvariantError(\n    'Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment.',\n  );\n}\n\nexport function getDefaultValues(\n  definition: OperationDefinitionNode | undefined,\n): Record<string, any> {\n  const defaultValues = Object.create(null);\n  const defs = definition && definition.variableDefinitions;\n  if (defs && defs.length) {\n    defs.forEach(def => {\n      if (def.defaultValue) {\n        valueToObjectRepresentation(\n          defaultValues,\n          def.variable.name,\n          def.defaultValue as ValueNode,\n        );\n      }\n    });\n  }\n  return defaultValues;\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}